{% extends "administration/site_base.html" %}

{% block content %}
{% if perms.rest.add_item and exhibition_pk %}
<div class='add_button'>
    <a href="{% url 'item_add' exhibition_pk %}">add item</a>
</div>
{% endif %}

<div class='table'>
    {% for item in items %}
    <div class='table-row'>
        {% if perms.rest.change_item %}
            <a href="
                {% if exhibition_pk %}
                    {% url 'item_edit' exhibition_pk item.pk %}
                {% else %}
                    {% url 'item_no_exhibition_edit' item.pk %}
                {% endif %}
            ">
        {% endif %}

        {{ item.name }} || {{ item.year }} || {{ item.author }}

        {% if perms.rest.change_item %}
            </a>
        {% endif %}

        {% if perms.rest.delete_item %}
        <a href="
            {% if exhibition_pk %}
                {% url 'item_delete' exhibition_pk item.pk %}
            {%else%}
                {% url 'item_no_exhibition_delete' item.pk  %}
            {% endif %}
        ">delete</a>
        {% endif %}
    </div>
    {% endfor %}
</div>

<br/>

{% if is_paginated %}
<div class="pagination">
    <span class="step-links">
        {% if page_obj.has_previous %}
            <a href="?page={{ page_obj.previous_page_number }}">
                previous
            </a>
        {% endif %}

        <span class="current">
            Page {{ page_obj.number }}
            of {{ page_obj.paginator.num_pages }}.
        </span>

        {% if page_obj.has_next %}
            <a href="?page={{ page_obj.next_page_number }}">next</a>
        {% endif %}
    </span>
</div>
{% endif %}

{% endblock content %}

